# Overview

*PicoGpu* exposes a set of configuration pins (SystemC signals) used to configure how the device functions. This concept is commonly known as *pipeline state* in most graphics APIs. Configuration pins are connected to various blocks inside the GPU. Some pins are specific to a one block in particular, and some may be shared by multiple sections of the device. The latter are called global pins.

All configuration pins are members of `gpu.config` structure and can be set in host-side code to a desired value. Changing their values while the GPU is working is undefined. In order to alter the configuration, one must call `gpu.commandStreamer.waitForIdle()` to flush all pending GPU-side tasks, make necessary changes and then launch next tasks.

User of the GPU should ideally set all of the configuration pins to the desired values. Some of them may have meaningful defaults (e.g. `OM.depthEnable = false`), however most pins will require an explicit initialization.


# Currently supported pins
| Name                           | Purpose                                                                                                                                                                                                                                                  |
| ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| GLOBAL.vsCustomInputComponents | A descriptor structure defining, what inputs will be fed from vertex buffer to the vertex shader. User should not create this structure manually, but rather acquire it from `getVsCustomInputComponents()` method of the compiled vertex shader binary. |
| GLOBAL.vsPsCustomComponents    | A descriptor structure defining vertex shader outputs, which will be fed to the fragment shader. User should not create this structure manually, but rather acquire it from `getVsPsCustomComponents()` method of the compiled vertex shader binary.     |
| GLOBAL.framebufferWidth        | Width in pixels of the framebuffer to render to.                                                                                                                                                                                                         |
| GLOBAL.framebufferHeight       | Height in pixels of the framebuffer to render to.                                                                                                                                                                                                        |
| PA.verticesAddress             | GPU memory address pointing to vertex buffer.                                                                                                                                                                                                            |
| PA.verticesCount               | Size of the vertex buffer in vertices.                                                                                                                                                                                                                   |
| VS.shaderAddress               | GPU memory address of a compiled binary of vertex shader.                                                                                                                                                                                                |
| VS.uniforms                    | A descriptor structure defining uniforms used by vertex shader. User should not create this structure manually, but rather acquire it from `getUniforms()` method of the compiled vertex shader binary.                                                  |
| VS.uniformsData                | Two-dimensional array defining values used to initialize uniforms. First dimension selects the uniform index and the second dimension selects given uniform's component (x,y,z or w).                                                                    |
| FS.shaderAddress               | See `VS.shaderAddress`.                                                                                                                                                                                                                                  |
| FS.uniforms                    | See `VS.uniforms`.                                                                                                                                                                                                                                       |
| FS.uniformsData                | See `VS.uniformsData`.                                                                                                                                                                                                                                   |
| OM.framebufferAddress          | GPU memory address of the framebuffer to render to. Note that there must be enough space for `framebufferWidth * framebufferHeight*` pixels in this memory region.                                                                                       |
| OM.depthEnable                 | Whether to use the Z-buffer technique. Off by default.                                                                                                                                                                                                   |
| OM.depthBufferAddress          | GPU memory address of the Z-buffer. Only relevant when `OM.depthEnable = true`.                                                                                                                                                                          |
